# LifeRPG 新功能说明

## 📅 更新日期
2026-01-22

## ✨ 新增功能概览

本次更新为 LifeRPG 添加了两大核心功能，旨在提供更智能、更个性化的任务管理体验：

### 1. 🎯 用户引导设置系统
### 2. 🤖 AI 智能任务助手

---

## 🎯 功能一：用户引导设置系统

### 功能描述
新用户注册后，系统会引导用户完成个性化设置，包括身份定位、成长目标和任务强度偏好。这些信息将用于后续的 AI 任务推荐。

### 使用流程

#### 步骤 1：选择身份
用户可以从以下预设身份中选择：
- 🎓 **学生** - 在校学习，追求学业进步
- 💼 **职场人** - 职场打拼，提升职业技能
- 🎨 **自由职业** - 自由工作，灵活安排时间
- 🚀 **创业者** - 创业路上，追求事业突破
- 🔬 **研究者** - 科研工作，探索未知领域
- ✨ **其他** - 自定义你的身份

#### 步骤 2：设定成长目标
用户可以多选以下成长需求（也可自定义）：
- 📚 学术提升
- 💼 职业发展
- 💪 健康管理
- 🎯 技能学习
- 🎨 创意表达
- 👥 社交拓展
- 💰 财务规划
- 🎮 兴趣爱好

#### 步骤 3：选择任务强度
根据时间和精力选择合适的强度：
- 🌱 **轻松模式** - 每天 2-3 个任务，适合新手或时间有限
- ⚖️ **平衡模式** - 每天 4-6 个任务，工作生活平衡
- 🔥 **挑战模式** - 每天 7+ 个任务，追求高效产出

### 技术实现

#### 新增类型定义
```typescript
// src/types/game.ts

// 用户身份类型
export type UserRole = 'student' | 'worker' | 'freelancer' | 'entrepreneur' | 'researcher' | 'other';

// 成长需求类型
export type GrowthGoal = 'academic' | 'career' | 'health' | 'skill' | 'creativity' | 'social' | 'finance' | 'hobby';

// 任务强度偏好
export type TaskIntensity = 'light' | 'moderate' | 'intense';

// 用户引导配置
export interface UserOnboarding {
  completed: boolean;
  role?: UserRole;
  customRole?: string;
  growthGoals: GrowthGoal[];
  customGoals: string[];
  taskIntensity: TaskIntensity;
  preferences?: {
    dailyTaskCount?: number;
    focusAreas?: string[];
  };
}
```

#### 新增组件
- **OnboardingModal.tsx** - 用户引导设置模态框
  - 三步引导流程
  - 动态表单验证
  - 美观的赛博朋克风格 UI

#### 修改的文件
- **LoginPage.tsx** - 注册成功后显示引导设置
- **User 接口** - 添加 `onboarding` 字段

---

## 🤖 功能二：AI 智能任务助手

### 2.1 每日任务建议

#### 功能描述
基于用户的身份、成长目标和任务强度偏好，AI 每天为用户生成个性化的任务建议。

#### 使用方法
1. 在仪表盘页面点击 **"✨ AI建议"** 按钮
2. AI 会根据你的配置生成 3-8 个任务建议
3. 每个任务包含：
   - 📝 任务标题和描述
   - 🏷️ 任务类型（主线/支线/日常）
   - 💪 关联属性（智力/活力/管理/创造）
   - ⏱️ 预估时长
   - 🎯 优先级
   - 🏷️ 标签
   - 💡 推荐理由
4. 选择需要的任务，一键添加到任务列表

#### 任务建议示例
```json
{
  "title": "完成论文第三章初稿",
  "description": "撰写论文第三章的文献综述部分，整理至少10篇相关文献",
  "type": "main",
  "attributes": ["int", "mng"],
  "estimatedDuration": 120,
  "priority": "high",
  "tags": ["学术", "写作"],
  "reason": "作为研究者，论文写作是核心任务，符合你的学术提升目标"
}
```

### 2.2 智能奖励设定

#### 功能描述
创建任务时，AI 可以根据任务的标题、描述、类型和属性，自动设定合理的经验值和金币奖励。

#### 使用方法
1. 在任务创建表单中填写任务信息
2. 点击 **"✨ AI 智能设定"** 按钮
3. AI 会分析任务难度和重要性，自动设定奖励
4. 系统会显示 AI 的推理过程

#### 奖励设定原则
- **主线任务**：50-100 EXP，30-60 金币
- **支线任务**：20-50 EXP，15-30 金币
- **日常任务**：10-20 EXP，5-15 金币
- 考虑任务难度、时长、重要性
- 多属性任务适当增加奖励

### 技术实现

#### 新增 AI 服务函数
```typescript
// src/services/aiService.ts

// 生成每日任务建议
export async function generateDailyTaskSuggestions(
  userOnboarding: any,
  userStats: any
): Promise<AITaskSuggestion[]>

// 智能设定任务奖励
export async function generateTaskReward(
  taskTitle: string,
  taskDescription: string,
  taskType: 'main' | 'side' | 'daily',
  attributes: string[]
): Promise<AITaskReward>
```

#### 新增组件
- **DailyTaskSuggestions.tsx** - 每日任务建议模态框
  - 显示 AI 生成的任务列表
  - 支持多选任务
  - 一键批量添加
  - 重新生成功能

#### 修改的文件
- **QuestFormModal.tsx** - 添加 AI 智能设定奖励按钮
- **DashboardPage.tsx** - 添加 AI 建议入口按钮
- **aiService.ts** - 扩展 AI 服务功能

---

## 🎨 UI/UX 改进

### 视觉设计
- 保持赛博朋克风格的一致性
- 使用渐变色和发光效果突出 AI 功能
- 流畅的动画过渡效果

### 交互优化
- 三步引导流程，清晰易懂
- 实时表单验证
- 加载状态提示
- 错误处理和重试机制

---

## 📋 使用建议

### 首次使用
1. **完成用户引导**：认真填写你的身份和目标，这将影响 AI 推荐的准确性
2. **尝试 AI 建议**：每天登录时点击"AI建议"，查看个性化任务
3. **使用智能奖励**：创建任务时让 AI 帮你设定合理的奖励

### 最佳实践
- **定期更新偏好**：在设置页面可以修改你的身份和目标
- **结合手动创建**：AI 建议作为补充，重要任务仍需手动规划
- **调整任务强度**：根据实际情况调整每日任务数量

---

## 🔧 配置说明

### AI 服务配置
系统默认使用 DeepSeek API，你可以在设置中切换到其他 AI 提供商：
- DeepSeek（默认）
- OpenAI
- Claude
- 通义千问

### API 密钥设置
在设置页面的"AI 配置"中可以设置自己的 API 密钥。

---

## 🐛 已知问题

1. AI 生成的任务建议依赖网络连接
2. 首次生成可能需要 5-10 秒
3. 如果 API 调用失败，会显示错误提示并提供重试选项

---

## 🚀 未来计划

### 短期计划
- [ ] 添加任务建议历史记录
- [ ] 支持自定义 AI 提示词
- [ ] 优化 AI 响应速度

### 长期计划
- [ ] 基于完成情况的智能调整
- [ ] 任务优先级自动排序
- [ ] 周/月计划自动生成

---

## 💡 技术亮点

1. **类型安全**：完整的 TypeScript 类型定义
2. **模块化设计**：AI 服务独立封装，易于扩展
3. **多提供商支持**：支持多个 AI 服务商，灵活切换
4. **容错处理**：完善的错误处理和降级方案
5. **用户体验**：流畅的动画和即时反馈

---

## 📞 反馈与支持

如有问题或建议，欢迎通过以下方式联系：
- GitHub Issues
- 项目讨论区

---

**祝你在 LifeRPG 中不断成长！🎮✨**
