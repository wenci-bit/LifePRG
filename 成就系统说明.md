# LifeRPG 成就与等级系统完整说明

## 🎮 系统概览

完整的成就和等级系统已经实现，包含**25+成就**、**5个等级档次**、**实时通知动画**和**每日登录奖励**，打造高度成瘾的游戏化体验。

---

## ✨ 核心特性

### 1. 成就系统（25+ 成就）

#### 成就分类（6大类别）

1. **里程碑成就** (milestone)
   - 踏出第一步：完成第一个任务
   - 学徒：达到等级 5
   - 专家：达到等级 10
   - 大师：达到等级 20
   - 传奇：达到等级 50

2. **任务成就** (quest)
   - 任务新手：完成 10 个任务
   - 任务达人：完成 50 个任务
   - 任务狂魔：完成 100 个任务
   - 任务传说：完成 500 个任务

3. **连击成就** (streak)
   - 三日坚持：连续打卡 3 天
   - 一周勇士：连续打卡 7 天
   - 月度冠军：连续打卡 30 天
   - 百日筑基：连续打卡 100 天

4. **属性成就** (attribute)
   - INT/VIT/MNG/CRE 各属性 50 点、100 点成就
   - 共 8 个属性成就

5. **特殊成就** (special)
   - 小富即安：积累 100 金币
   - 富甲一方：积累 1000 金币
   - 平衡之道：所有属性达到 50

6. **隐藏成就** (hidden)
   - 夜猫子：凌晨 0-5 点完成任务
   - 早起的鸟儿：早晨 5-7 点完成任务
   - 完美主义者：单日完成 10 个任务
   - **显示为 "???" 直到解锁**

#### 成就等级（5个档次）

| 等级 | 颜色 | 难度 | 示例 |
|------|------|------|------|
| 🥉 **Bronze** | 青铜 | 简单 | 完成第一个任务 |
| 🥈 **Silver** | 白银 | 中等 | 达到等级 10 |
| 🥇 **Gold** | 黄金 | 较难 | 连续打卡 30 天 |
| 💎 **Platinum** | 铂金 | 困难 | 完成 500 个任务 |
| 💠 **Diamond** | 钻石 | 极难 | （预留顶级成就） |

#### 成就奖励

每个成就解锁后获得：
- ⚡ **经验值**（50-2000 EXP）
- 💰 **金币**（20-1000 coins）
- 🏆 **称号**（部分成就附带专属称号）

---

### 2. 等级系统（8个里程碑）

| 等级 | 称号 | 所需经验 | 奖励 | 解锁内容 |
|------|------|----------|------|----------|
| 1 | 新手冒险者 | 0 | - | 基础功能 |
| 5 | 学徒 | 500 | 50 金币 | 成就系统 |
| 10 | 专家 | 1500 | 100 金币 | **经验加成 +10%** |
| 15 | 精英 | 3000 | 150 金币 | 专注模式（计划中） |
| 20 | 大师 | 5000 | 250 金币 | **经验加成 +20%** |
| 30 | 宗师 | 10000 | 500 金币 | 数据分析（计划中） |
| 40 | 传说 | 18000 | 750 金币 | **经验加成 +30%** |
| 50 | 史诗 | 30000 | 1000 金币 | 全功能解锁 |

#### 经验加成系统

```typescript
等级 10-19: +10% 经验加成
等级 20-39: +20% 经验加成
等级 40+:   +30% 经验加成
```

**示例**：
- 完成一个 50 EXP 的任务
- 如果你是等级 25 → 获得 50 × 1.2 = **60 EXP**
- 如果你是等级 45 → 获得 50 × 1.3 = **65 EXP**

---

### 3. 每日登录系统

#### 连击奖励（递增机制）

| 连击天数 | 每日奖励 | 经验加成 |
|----------|----------|----------|
| 1 天 | 10 金币 + 20 EXP | +0% |
| 3 天 | 25 金币 + 50 EXP | **+10%** |
| 7 天 | 45 金币 + 90 EXP | **+20%** |
| 14 天 | 80 金币 + 160 EXP | **+30%** |
| 30 天+ | 60 金币 + 120 EXP | **+50%** |

#### 连击规则

- ✅ **连续登录**：每天自动增加连击数
- ❌ **中断惩罚**：超过 1 天未登录，连击归零
- 📊 **历史最高**：保留最长连击记录
- 🎁 **自动奖励**：登录即刻发放金币和经验

---

### 4. 炫酷通知动画

#### 升级通知（全屏特效）

当你升级时触发：

**视觉效果**：
- 🌟 50 个飞舞的粒子特效
- ⚡ 旋转的霹雳图标
- 🎨 渐变彩虹色等级数字
- ✨ 发光边框和阴影

**显示内容**：
- 新等级和称号
- 金币奖励
- 解锁的新功能列表

**交互**：
- 点击任意位置关闭
- 自动保存奖励

#### 成就解锁通知（右上角弹窗）

**视觉效果**：
- 🎆 20 个粒子爆炸效果
- 🏆 旋转的星星图标
- 🌈 等级专属光效颜色
- 💫 渐入渐出动画

**显示内容**：
- 成就名称和描述
- 经验和金币奖励
- 特殊称号（如果有）

**自动关闭**：
- 5 秒后自动消失
- 可点击 X 手动关闭

---

## 🎯 成瘾机制设计

### 1. 进度可视化
- ✅ 成就页面实时显示进度条
- ✅ 总体完成度百分比
- ✅ 5 个等级档次的完成统计
- ✅ 按类别分组显示

### 2. 即时反馈
- ✅ 完成任务立即检查成就解锁
- ✅ 升级时全屏庆祝动画
- ✅ 成就解锁炫酷通知
- ✅ 经验和金币数字跳动

### 3. 目标驱动
- ✅ 短期目标：完成 10 个任务
- ✅ 中期目标：达到等级 20
- ✅ 长期目标：解锁所有成就
- ✅ 隐藏惊喜：3 个神秘成就

### 4. 奖励递增
- ✅ 连击奖励递增（1天→30天+）
- ✅ 等级加成递增（10%→30%）
- ✅ 成就奖励递增（Bronze→Diamond）
- ✅ 任务数量里程碑（10→500）

### 5. 损失规避
- ❌ 连击中断归零（促使每日登录）
- 📈 历史最高连击记录（避免挫败感）
- 🎁 登录即有奖励（降低心理门槛）

---

## 📂 技术实现

### 文件结构

```
src/
├── data/
│   ├── achievements.ts      # 25+ 成就数据定义
│   └── levels.ts            # 等级系统和加成公式
├── components/
│   ├── LevelUpNotification.tsx      # 升级通知组件
│   ├── AchievementNotification.tsx  # 成就通知组件
│   └── AchievementsPage.tsx         # 成就页面（已更新）
├── store/
│   └── gameStore.ts         # Zustand 状态管理（已增强）
├── types/
│   └── game.ts              # 类型定义（已扩展）
└── app/
    └── page.tsx             # 主页面（已集成通知）
```

### 核心函数

#### 1. 成就检查（自动触发）

```typescript
checkAchievements() {
  // 遍历所有成就
  ACHIEVEMENTS.forEach(achievement => {
    // 根据类别检查条件
    switch (achievement.category) {
      case 'milestone': // 等级里程碑
      case 'quest':     // 任务数量
      case 'streak':    // 连击天数
      case 'attribute': // 属性达标
      case 'special':   // 金币/平衡
      case 'hidden':    // 时间/特殊条件
    }

    // 满足条件 → 解锁成就 → 显示通知
    if (shouldUnlock) {
      unlockAchievement(achievement.id);
    }
  });
}
```

**触发时机**：
- ✅ 完成任务时
- ✅ 增加属性时
- ✅ 增加金币时
- ✅ 每日登录时

#### 2. 每日登录（自动执行）

```typescript
checkDailyLogin() {
  const today = '2026-01-03';
  const lastLogin = stats.lastLoginDate;

  // 计算连击
  if (today === lastLogin + 1) {
    newStreak = currentStreak + 1;  // 连续登录
  } else {
    newStreak = 1;  // 连击中断
  }

  // 发放奖励
  coins += 10 + (newStreak * 5);  // 递增金币
  exp += (10 + newStreak * 5) * 2; // 双倍经验

  // 检查连击成就
  checkAchievements();
}
```

**执行时机**：
- ✅ 应用启动时（useEffect）
- ✅ 自动判断是否是新的一天
- ✅ 只执行一次（不重复奖励）

#### 3. 经验加成计算

```typescript
addExp(amount: number) {
  // 等级加成
  const levelBonus = getExpBonus(level);
  // 连击加成
  const streakBonus = getStreakBonus(currentStreak);

  // 最终经验
  const finalExp = amount * levelBonus * streakBonus;

  // 示例：50 EXP × 1.2 (等级20) × 1.5 (连击30天) = 90 EXP
}
```

---

## 🚀 使用指南

### 测试成就系统

1. **完成第一个任务**
   ```
   → 成就解锁："踏出第一步" (Bronze)
   → 获得：50 EXP + 20 金币 + "初心者"称号
   → 全屏通知弹出
   ```

2. **连续完成 10 个任务**
   ```
   → 成就解锁："任务新手" (Bronze)
   → 获得：100 EXP + 50 金币
   → 属性增长 → 可能解锁属性成就
   ```

3. **连续登录 7 天**
   ```
   → 每日获得递增奖励
   → 第7天解锁："一周勇士" (Silver)
   → 获得：150 EXP + 75 金币
   → 经验加成 +20%
   ```

4. **达到等级 5**
   ```
   → 全屏升级动画
   → 获得称号："学徒"
   → 奖励：50 金币
   → 解锁成就系统
   → 成就解锁："学徒" (Bronze)
   ```

### 查看成就进度

1. 点击左侧导航栏「成就」图标
2. 查看总体进度：X/25 已解锁
3. 按类别浏览：里程碑、任务、连击等
4. 查看每个成就的：
   - 🏆 等级（Bronze→Diamond）
   - 📊 当前进度（3/10）
   - 🎁 奖励（EXP + 金币 + 称号）
   - 🔒 解锁状态

### 隐藏成就解锁

**夜猫子**：
- 在凌晨 0-5 点完成任意任务
- 自动解锁，显示通知

**早起的鸟儿**：
- 在早晨 5-7 点完成任意任务
- 自动解锁，显示通知

**完美主义者**：
- 单日完成 10 个任务（暂未实现追踪）
- 未来版本支持

---

## 🎨 视觉效果预览

### 成就页面特性

1. **头部统计卡片**
   - 大号数字显示已解锁/总数
   - 彩虹渐变进度条
   - 5 个等级档次圆形图标

2. **成就卡片设计**
   - 🌈 等级专属边框颜色
   - ✨ 解锁后发光特效
   - 📊 实时进度条
   - 🎁 奖励信息预览
   - 🔒 未解锁半透明遮罩
   - ❓ 隐藏成就显示为 "???"

3. **分类展示**
   - 6 个类别标题
   - 每个类别独立进度统计
   - 网格布局，3 列排列

### 通知动画特性

1. **升级通知**
   - 全屏黑色半透明背景
   - 50 个彩色粒子飞舞
   - 旋转的霹雳图标
   - 渐变彩虹色数字
   - 玻璃态卡片显示奖励

2. **成就通知**
   - 右上角弹出（避免遮挡内容）
   - 20 个白色粒子爆炸
   - 旋转缩放的星星图标
   - 等级专属光效
   - 5 秒后自动消失

---

## 📈 数据持久化

所有数据通过 **Zustand + LocalStorage** 自动保存：

```typescript
// 自动保存的数据
{
  level: 5,
  currentExp: 120,
  coins: 350,
  attributes: { int: 30, vit: 20, mng: 15, cre: 25 },
  unlockedAchievements: ['first_step', 'level_5', ...],
  stats: {
    totalQuestsCompleted: 15,
    currentStreak: 7,
    longestStreak: 12,
    lastLoginDate: '2026-01-03',
    totalLoginDays: 20
  }
}
```

**刷新页面 → 数据不丢失 ✅**

---

## 🔮 未来扩展

### 计划中功能

1. **每日挑战**
   - 每日3个随机挑战任务
   - 完成额外奖励经验
   - 连续完成解锁特殊成就

2. **成就排行榜**
   - 本地多用户对比
   - 成就解锁速度统计
   - 稀有成就展示

3. **完美主义者追踪**
   - 追踪单日完成任务数
   - 达到 10 个自动解锁

4. **更多隐藏成就**
   - 特定日期完成任务
   - 属性特定组合
   - 金币消费行为

5. **成就称号系统**
   - 展示当前称号
   - 称号切换功能
   - 称号专属特效

---

## 💡 最佳实践

### 如何快速升级？

1. ✅ **每日登录**：获得连击加成
2. ✅ **完成日常任务**：稳定经验来源
3. ✅ **保持高连击**：7天+获得 +20% 经验
4. ✅ **达到等级 10/20/40**：获得永久经验加成
5. ✅ **解锁成就**：额外经验和金币奖励

### 如何解锁所有成就？

1. 📋 **任务成就**：坚持完成任务（10→50→100→500）
2. 📅 **连击成就**：每日登录不间断（3→7→30→100）
3. 🎯 **属性成就**：均衡发展四维属性
4. 💰 **金币成就**：少花多攒
5. 🕐 **隐藏成就**：特定时间段完成任务
6. ⚖️ **平衡之道**：所有属性至少 50 点

---

## 📊 成就完成建议路线图

### 第 1 周
- ✅ 完成第一个任务 → 踏出第一步
- ✅ 连续登录 3 天 → 三日坚持
- ✅ 完成 10 个任务 → 任务新手
- ✅ 达到等级 5 → 学徒

### 第 2-4 周
- ✅ 连续登录 7 天 → 一周勇士
- ✅ 完成 50 个任务 → 任务达人
- ✅ 达到等级 10 → 专家
- ✅ INT/VIT 任一属性达到 50

### 第 2-3 个月
- ✅ 连续登录 30 天 → 月度冠军
- ✅ 完成 100 个任务 → 任务狂魔
- ✅ 达到等级 20 → 大师
- ✅ 积累 1000 金币 → 富甲一方
- ✅ 所有属性达到 50 → 平衡之道

### 长期目标
- ✅ 连续登录 100 天 → 百日筑基
- ✅ 完成 500 个任务 → 任务传说
- ✅ 达到等级 50 → 史诗
- ✅ 所有属性达到 100
- ✅ 解锁全部隐藏成就

---

## 🎯 总结

这套成就和等级系统通过以下机制打造高度成瘾的游戏化体验：

1. ✨ **即时反馈** - 炫酷的通知动画
2. 📊 **进度可视化** - 实时进度条和统计
3. 🎁 **奖励递增** - 连击和等级双重加成
4. 🏆 **目标分层** - 短期/中期/长期目标
5. 🌈 **稀缺性** - 5 个等级档次 + 隐藏成就
6. ⚡ **损失规避** - 连击中断惩罚
7. 🎮 **收集欲** - 25+ 成就等待解锁

**开始你的 LifeRPG 之旅，解锁全部成就，成为传奇！** 🚀
