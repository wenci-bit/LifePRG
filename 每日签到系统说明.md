# 每日签到系统说明

## 📅 功能概述

每日签到系统是 LifeRPG 的全新功能模块，通过每日签到鼓励用户养成持续使用的习惯，并提供丰富的奖励机制。

---

## ✨ 核心特性

### 1. 每日签到奖励

- **基础奖励**：每次签到可获得经验值和金币
- **递增奖励**：连续签到天数越多，每日奖励越丰厚
- **分类金币**：获得通用金币，可在商店兑换奖励

### 2. 连续签到奖励阶梯

签到系统采用阶梯式奖励机制，连续签到达到特定天数可获得额外奖励：

| 连续天数 | 奖励类型 | 奖励内容 |
|---------|---------|---------|
| 第1-6天 | 基础奖励 | 经验值 20-45，金币 10-35 |
| **第7天** | 周奖励 | 额外 50 EXP，30 金币，各 10 分类金币 |
| **第14天** | 双周奖励 | 额外 80 EXP，50 金币，各 15 分类金币 |
| **第21天** | 三周奖励 | 额外 120 EXP，70 金币，各 20 分类金币 |
| **第28天** | 四周奖励 | 额外 150 EXP，100 金币，各 25 分类金币 |
| **第30天** | 月度大奖 | 额外 200 EXP，150 金币，各 40 分类金币 |
| **第60天** | 双月奖励 | 额外 250 EXP，200 金币，各 50 分类金币 |
| **第100天** | 百日成就 | 额外 500 EXP，500 金币，各 100 分类金币 |

### 3. 签到日历

- 显示当月所有日期
- 标记已签到的日期（绿色）
- 高亮今天的日期（青色边框）
- 锁定未来日期（灰色）

### 4. 奖励预览

- 实时显示下次签到可获得的奖励
- 显示距离下一个里程碑的天数
- 进度条可视化显示签到进度

### 5. 签到通知

- 签到成功后弹出全屏通知
- 炫酷的粒子特效动画
- 详细展示获得的所有奖励
- 特殊日期显示额外的庆祝消息

---

## 🎮 使用方法

### 访问签到页面

1. 打开 LifeRPG 应用
2. 在左侧导航栏点击**日历图标**（Check-In）
3. 进入每日签到页面

### 进行签到

1. 点击页面中央的**"立即签到"**按钮
2. 系统自动计算连续签到天数
3. 发放对应的签到奖励
4. 显示签到成功通知

### 查看签到记录

- **签到日历**：查看本月签到记录
- **连续签到天数**：顶部显示当前连续签到天数
- **本月签到/累计签到**：查看统计数据

---

## 💰 奖励机制

### 基础奖励计算

```
基础经验值 = 20 + (连续天数 / 5) * 5
基础金币 = 10 + (连续天数 / 5) * 5
```

### 特殊奖励

- **第7天**：🎉 连续签到7天！获得额外奖励！
- **第14天**：✨ 连续签到14天！坚持得太好了！
- **第21天**：🔥 连续签到21天！养成习惯的关键时期！
- **第28天**：🏆 连续签到28天！你已经是大师了！
- **第30天**：👑 连续签到30天！月度传奇成就！
- **第100天**：💎 连续签到100天！百日成就！

### 金币类型

签到获得的金币包括：
- **通用金币**：可用于兑换商店中的任何物品
- **分类金币**（特殊日期额外奖励）：
  - 智慧币（INT）：学习类奖励
  - 活力币（VIT）：健康类奖励
  - 管理币（MNG）：规划类奖励
  - 创意币（CRE）：创作类奖励

---

## 📊 数据统计

签到系统提供以下统计数据：

1. **连续签到天数**：当前连续签到的天数
2. **最长连击**：历史上最长的连续签到记录
3. **本月签到**：本月已签到的天数
4. **累计签到**：总共签到的天数
5. **签到历史**：完整的签到日期记录

---

## 🎯 签到里程碑

系统设置了多个里程碑，达到后可获得额外奖励：

- 7天、14天、21天、28天
- 30天、60天、90天
- 100天、180天、365天

每个里程碑都有对应的进度条显示，帮助用户了解距离下一个目标还需多少天。

---

## ⚠️ 注意事项

### 签到规则

1. **每日一次**：每天只能签到一次
2. **连续计算**：中断签到会重置连续天数
3. **自动检测**：系统会在每日首次登录时自动检测
4. **时间判定**：以系统日期（YYYY-MM-DD）为准

### 中断处理

- 如果中断签到，连续天数将重置为 0
- 下次签到时重新开始计算连续天数
- 累计签到天数不受影响
- 签到历史记录保持完整

---

## 🔧 技术实现

### 数据存储

所有签到数据保存在本地浏览器的 LocalStorage 中，包括：

```typescript
checkIn: {
  hasCheckedInToday: boolean;        // 今天是否已签到
  lastCheckInDate: string;           // 上次签到日期
  checkInHistory: string[];          // 签到历史记录
  currentMonthCheckIns: number;      // 本月签到天数
  totalCheckIns: number;             // 累计签到天数
}
```

### 核心方法

- `dailyCheckIn()`: 执行签到操作
- `calculateCheckInReward()`: 计算签到奖励
- `getNextMilestone()`: 获取下一个里程碑

---

## 🎨 UI 组件

### 签到页面组件

- **DailyCheckIn.tsx**: 主签到页面
  - 签到按钮
  - 签到日历
  - 奖励预览
  - 统计数据

### 通知组件

- **CheckInNotification.tsx**: 签到成功通知
  - 全屏动画效果
  - 奖励详情展示
  - 特殊消息提示

---

## 📝 开发指南

### 自定义奖励

如需调整签到奖励，可修改 `src/data/checkIn.ts` 文件中的 `calculateCheckInReward` 函数。

### 添加新的里程碑

在 `calculateCheckInReward` 函数中添加新的条件判断：

```typescript
else if (consecutiveDays === 您的天数) {
  exp += 额外经验;
  coins += 额外金币;
  categorizedCoins = { /* 分类金币 */ };
  bonusMessage = '您的提示消息';
  isSpecial = true;
}
```

### 修改签到逻辑

核心签到逻辑位于 `src/store/gameStore.ts` 的 `dailyCheckIn` 方法中。

---

## 🚀 后续优化建议

1. **补签功能**：允许用户使用金币补签漏掉的天数
2. **签到提醒**：添加浏览器通知提醒用户签到
3. **签到成就**：创建与签到相关的成就系统
4. **签到排行**：如果添加多用户功能，可以创建签到排行榜
5. **自定义奖励**：允许用户自定义签到奖励
6. **签到主题**：根据季节或节日更换签到页面主题

---

## 📞 反馈与支持

如有问题或建议，请联系开发团队或在 GitHub 提交 Issue。

---

**享受每日签到的乐趣，坚持就是胜利！** 🎉
