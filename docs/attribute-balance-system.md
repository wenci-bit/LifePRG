# å±æ€§å¹³è¡¡ç³»ç»Ÿè®¾è®¡æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [1. ç³»ç»Ÿæ¦‚è¿°](#1-ç³»ç»Ÿæ¦‚è¿°)
- [2. è®¾è®¡ç†å¿µ](#2-è®¾è®¡ç†å¿µ)
- [3. æ ¸å¿ƒæœºåˆ¶](#3-æ ¸å¿ƒæœºåˆ¶)
- [4. å±æ€§é…ç½®](#4-å±æ€§é…ç½®)
- [5. ä½¿ç”¨æŒ‡å—](#5-ä½¿ç”¨æŒ‡å—)
- [6. æŠ€æœ¯å®ç°](#6-æŠ€æœ¯å®ç°)
- [7. æ•°æ®ç»“æ„](#7-æ•°æ®ç»“æ„)
- [8. API æ¥å£](#8-api-æ¥å£)

---

## 1. ç³»ç»Ÿæ¦‚è¿°

### 1.1 ä»€ä¹ˆæ˜¯å±æ€§å¹³è¡¡ç³»ç»Ÿï¼Ÿ

å±æ€§å¹³è¡¡ç³»ç»Ÿæ˜¯ LifeRPG ä¸­çš„ä¸€ä¸ªåŠ¨æ€å±æ€§ç®¡ç†æœºåˆ¶ï¼Œæ—¨åœ¨æ¨¡æ‹Ÿç°å®ç”Ÿæ´»ä¸­æŠ€èƒ½å’Œèƒ½åŠ›çš„**è‡ªç„¶è¡°å‡ç°è±¡**ã€‚

ä¸ä¼ ç»Ÿé™æ€å±æ€§ç³»ç»Ÿä¸åŒï¼Œæœ¬ç³»ç»Ÿä¸­çš„æ¯ä¸ªå±æ€§å€¼éƒ½ä¼šéšç€æ—¶é—´è‡ªç„¶è¡°å‡ï¼Œæ¿€åŠ±ç”¨æˆ·é€šè¿‡æŒç»­å®Œæˆä»»åŠ¡æ¥ç»´æŒå±æ€§å¹³è¡¡ã€‚

### 1.2 æ ¸å¿ƒç‰¹ç‚¹

- âœ… **åŠ¨æ€è¡°å‡**ï¼šå±æ€§ä¼šéšæ—¶é—´æŒ‡æ•°è¡°å‡ï¼Œè€Œéæ°¸ä¹…ä¿æŒ
- âœ… **ç‹¬ç«‹è¿½è¸ª**ï¼šæ¯æ¬¡å±æ€§è·å–éƒ½æœ‰ç‹¬ç«‹çš„è¡°å‡æ—¶é—´çº¿
- âœ… **å·®å¼‚åŒ–è®¾è®¡**ï¼šä¸åŒå±æ€§æœ‰ä¸åŒçš„åŠè¡°æœŸå’Œè¡°å‡é€Ÿç‡
- âœ… **å¥åº·åº¦è¯„åˆ†**ï¼šåŸºäºè¿‘æœŸæ´»åŠ¨è®¡ç®—å±æ€§å¥åº·çŠ¶å†µ
- âœ… **å®Œæ•´è®°å½•**ï¼šæ‰€æœ‰å˜åŒ–éƒ½è®°å½•åœ¨äº¤æ˜“å†å²ä¸­

---

## 2. è®¾è®¡ç†å¿µ

### 2.1 ä¸ºä»€ä¹ˆéœ€è¦å±æ€§è¡°å‡ï¼Ÿ

#### ç°å®æ˜ å°„
åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼š
- ä»Šå¤©è¿åŠ¨é”»ç‚¼ï¼Œä½“èƒ½æå‡ï¼Œä½†å¦‚æœé•¿æœŸä¸è¿åŠ¨ï¼Œä½“èƒ½ä¼šä¸‹é™
- å­¦ä¹ ä¸€é—¨æŠ€èƒ½åï¼Œå¦‚æœä¸æŒç»­ç»ƒä¹ ï¼Œä¼šé€æ¸ç”Ÿç–
- åˆ›æ„çµæ„Ÿéœ€è¦æŒç»­åŸ¹å…»ï¼Œé•¿æœŸä¸åˆ›ä½œä¼šå˜å¾—è¿Ÿé’

#### æ¸¸æˆåŒ–ç›®æ ‡
- **é˜²æ­¢èººå¹³**ï¼šé¿å…ç”¨æˆ·å®Œæˆä¸€æ‰¹ä»»åŠ¡åé•¿æœŸä¸æ´»è·ƒ
- **æŒç»­æ¿€åŠ±**ï¼šé¼“åŠ±ç”¨æˆ·å»ºç«‹é•¿æœŸä¹ æƒ¯ï¼Œè€ŒéçŸ­æœŸå†²åˆº
- **å¹³è¡¡å¼•å¯¼**ï¼šé€šè¿‡å¥åº·åº¦æé†’ï¼Œå¼•å¯¼ç”¨æˆ·å…³æ³¨è–„å¼±å±æ€§

### 2.2 è®¾è®¡åŸåˆ™

1. **çœŸå®æ„Ÿ**ï¼šè¡°å‡é€Ÿç‡ç¬¦åˆç°å®è§„å¾‹ï¼ˆå¦‚è¿åŠ¨æ•ˆæœè¡°å‡å¿«ï¼ŒçŸ¥è¯†ä¿ç•™æ—¶é—´é•¿ï¼‰
2. **å¯è§æ€§**ï¼šç”¨æˆ·å¯ä»¥æ¸…æ™°çœ‹åˆ°å±æ€§è¡°å‡çŠ¶æ€å’Œå¥åº·åº¦
3. **å¯æ§æ€§**ï¼šç”¨æˆ·å¯ä»¥é€šè¿‡å®Œæˆä»»åŠ¡æ¥ç»´æŒå±æ€§
4. **æ¸è¿›æ€§**ï¼šè¡°å‡æ˜¯æ¸è¿›çš„ï¼Œä¸ä¼šçªç„¶å½’é›¶

---

## 3. æ ¸å¿ƒæœºåˆ¶

### 3.1 è¡°å‡æ¨¡å‹

#### æŒ‡æ•°è¡°å‡å…¬å¼

```javascript
currentValue = initialAmount Ã— (1 - decayRate)^daysPassed
```

**å‚æ•°è¯´æ˜ï¼š**
- `currentValue`ï¼šå½“å‰å‰©ä½™å€¼
- `initialAmount`ï¼šåˆå§‹è·å¾—çš„å±æ€§å€¼
- `decayRate`ï¼šæ¯æ—¥è¡°å‡ç‡ï¼ˆç™¾åˆ†æ¯”ï¼‰
- `daysPassed`ï¼šç»è¿‡çš„å¤©æ•°

#### åŠè¡°æœŸ

åŠè¡°æœŸæ˜¯æŒ‡å±æ€§å€¼è¡°å‡åˆ°åˆå§‹å€¼ 50% æ‰€éœ€çš„å¤©æ•°ã€‚

**è®¡ç®—å…¬å¼ï¼š**
```
0.5 = (1 - decayRate)^halfLifeDays
```

### 3.2 è¡°å‡æµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·å®Œæˆä»»åŠ¡] --> B[è°ƒç”¨ addDynamicAttribute]
    B --> C[åˆ›å»º AttributeRecord]
    C --> D[è®°å½•åˆå§‹å€¼å’Œæ—¶é—´æˆ³]
    D --> E[æ·»åŠ åˆ° attributeRecords æ•°ç»„]

    F[æ¯æ—¥ç™»å½•] --> G[è°ƒç”¨ calculateAttributeDecay]
    G --> H[éå†æ‰€æœ‰ AttributeRecord]
    H --> I[è®¡ç®—æ¯æ¡è®°å½•çš„è¡°å‡å€¼]
    I --> J{currentValue > 0.01?}
    J -->|æ˜¯| K[æ›´æ–° currentValue]
    J -->|å¦| L[ä»åˆ—è¡¨ä¸­ç§»é™¤]
    K --> M[æ›´æ–°æ€»å±æ€§å€¼]
    L --> M
    M --> N[è®°å½•å±æ€§å˜åŒ–åˆ°äº¤æ˜“å†å²]
```

### 3.3 å¥åº·åº¦ç³»ç»Ÿ

å¥åº·åº¦æ˜¯è¡¡é‡å±æ€§æ´»è·ƒç¨‹åº¦çš„æŒ‡æ ‡ï¼ŒèŒƒå›´ 0-100 åˆ†ã€‚

**è®¡ç®—æ–¹æ³•ï¼š**
1. è·å–è¯¥å±æ€§æœ€è¿‘ 30 å¤©çš„æ‰€æœ‰è®°å½•
2. è®¡ç®—æ¯æ¡è®°å½•çš„ä¿ç•™ç‡ï¼š`(currentValue / initialAmount) Ã— 100`
3. å¯¹æ‰€æœ‰ä¿ç•™ç‡æ±‚å¹³å‡å€¼

**å¥åº·åº¦åˆ†çº§ï¼š**
- ğŸŸ¢ **å¥åº· (70-100)**ï¼šå±æ€§æ´»è·ƒï¼Œä¿æŒè‰¯å¥½
- ğŸŸ¡ **ä¸€èˆ¬ (40-69)**ï¼šéœ€è¦å…³æ³¨ï¼Œå»ºè®®å®Œæˆç›¸å…³ä»»åŠ¡
- ğŸ”´ **å±é™© (0-39)**ï¼šæ€¥éœ€æå‡ï¼Œæ˜¾ç¤ºè­¦å‘Šæç¤º

---

## 4. å±æ€§é…ç½®

### 4.1 å››ç»´å±æ€§å¯¹æ¯”è¡¨

| å±æ€§ | åç§° | åŠè¡°æœŸ | æ¯æ—¥è¡°å‡ç‡ | è®¾è®¡ç†å¿µ |
|------|------|--------|-----------|----------|
| **INT** | æ™ºåŠ› | 14 å¤© | 5% | çŸ¥è¯†ä¿ç•™æ—¶é—´æœ€é•¿ï¼Œå­¦ä¹ æˆæœè¾ƒä¸ºæŒä¹… |
| **VIT** | æ´»åŠ› | 7 å¤© | 10% | è¿åŠ¨æ•ˆæœè¡°å‡æœ€å¿«ï¼Œéœ€è¦æŒç»­é”»ç‚¼ |
| **MNG** | ç®¡ç† | 10 å¤© | 7% | è§„åˆ’èƒ½åŠ›éœ€è¦æŒç»­è®­ç»ƒ |
| **CRE** | åˆ›é€  | 12 å¤© | 6% | åˆ›æ„çµæ„Ÿéœ€è¦æŒç»­åŸ¹å…» |

### 4.2 é…ç½®è¯¦æƒ…

#### æ™ºåŠ› (INT)
```typescript
{
  attribute: 'int',
  enabled: true,
  halfLifeDays: 14,
  minValue: 0,
  decayRate: 0.05  // 5% per day
}
```
**é€‚ç”¨åœºæ™¯ï¼š**
- ğŸ“š å­¦ä¹ ã€ç§‘ç ”ã€é˜…è¯»ä»»åŠ¡
- ğŸ“ çŸ¥è¯†ç§¯ç´¯ã€æŠ€èƒ½å­¦ä¹ 
- ğŸ’¡ é—®é¢˜è§£å†³ã€é€»è¾‘æ€è€ƒ

**è¡°å‡æ›²çº¿ï¼š**
- 7å¤©åï¼šçº¦70%ä¿ç•™
- 14å¤©åï¼šçº¦50%ä¿ç•™ï¼ˆåŠè¡°æœŸï¼‰
- 30å¤©åï¼šçº¦21%ä¿ç•™

---

#### æ´»åŠ› (VIT)
```typescript
{
  attribute: 'vit',
  enabled: true,
  halfLifeDays: 7,
  minValue: 0,
  decayRate: 0.10  // 10% per day
}
```
**é€‚ç”¨åœºæ™¯ï¼š**
- ğŸƒ è¿åŠ¨ã€å¥èº«ã€ä½“èƒ½è®­ç»ƒ
- ğŸ§˜ ç‘œä¼½ã€å†¥æƒ³ã€ä¼‘æ¯æ¢å¤
- ğŸ¥— å¥åº·é¥®é£Ÿã€ä½œæ¯è§„å¾‹

**è¡°å‡æ›²çº¿ï¼š**
- 3å¤©åï¼šçº¦73%ä¿ç•™
- 7å¤©åï¼šçº¦50%ä¿ç•™ï¼ˆåŠè¡°æœŸï¼‰
- 14å¤©åï¼šçº¦25%ä¿ç•™

---

#### ç®¡ç† (MNG)
```typescript
{
  attribute: 'mng',
  enabled: true,
  halfLifeDays: 10,
  minValue: 0,
  decayRate: 0.07  // 7% per day
}
```
**é€‚ç”¨åœºæ™¯ï¼š**
- ğŸ“‹ ä»»åŠ¡è§„åˆ’ã€æ—¶é—´ç®¡ç†
- ğŸ“Š é¡¹ç›®ç®¡ç†ã€å›¢é˜Ÿåä½œ
- ğŸ’¼ å·¥ä½œæµç¨‹ä¼˜åŒ–

**è¡°å‡æ›²çº¿ï¼š**
- 5å¤©åï¼šçº¦70%ä¿ç•™
- 10å¤©åï¼šçº¦50%ä¿ç•™ï¼ˆåŠè¡°æœŸï¼‰
- 20å¤©åï¼šçº¦25%ä¿ç•™

---

#### åˆ›é€  (CRE)
```typescript
{
  attribute: 'cre',
  enabled: true,
  halfLifeDays: 12,
  minValue: 0,
  decayRate: 0.06  // 6% per day
}
```
**é€‚ç”¨åœºæ™¯ï¼š**
- ğŸ¨ åˆ›ä½œã€è®¾è®¡ã€è‰ºæœ¯æ´»åŠ¨
- âœï¸ å†™ä½œã€éŸ³ä¹ã€è§†é¢‘åˆ¶ä½œ
- ğŸ’­ åˆ›æ–°æ€ç»´ã€å¤´è„‘é£æš´

**è¡°å‡æ›²çº¿ï¼š**
- 6å¤©åï¼šçº¦69%ä¿ç•™
- 12å¤©åï¼šçº¦50%ä¿ç•™ï¼ˆåŠè¡°æœŸï¼‰
- 24å¤©åï¼šçº¦25%ä¿ç•™

---

## 5. ä½¿ç”¨æŒ‡å—

### 5.1 ç”¨æˆ·è§†è§’

#### æŸ¥çœ‹å±æ€§å¹³è¡¡çŠ¶æ€

1. **ä¸»é¡µ â†’ å±æ€§è¯¦æƒ… â†’ æŸ¥çœ‹å±æ€§å¹³è¡¡**
2. æŸ¥çœ‹å››ä¸ªå±æ€§çš„å¥åº·åº¦å¡ç‰‡
3. å…³æ³¨å¥åº·åº¦ä½äº 40% çš„å±æ€§ï¼ˆçº¢è‰²è­¦å‘Šï¼‰

#### ç†è§£è¡°å‡è®°å½•

**è¡°å‡è®°å½•å¡ç‰‡åŒ…å«ï¼š**
- ğŸ“ **è·å¾—åŸå› **ï¼šå¦‚"å®Œæˆä»»åŠ¡ï¼šè·‘æ­¥30åˆ†é’Ÿ"
- ğŸ“… **è·å¾—æ—¥æœŸ**ï¼šè®°å½•æ—¶é—´
- â° **å‰©ä½™å¤©æ•°**ï¼šè·ç¦»å®Œå…¨è¡°å‡è¿˜æœ‰å¤šå°‘å¤©
- ğŸ“Š **ä¿ç•™è¿›åº¦**ï¼šå½“å‰å€¼å åˆå§‹å€¼çš„ç™¾åˆ†æ¯”
- âš™ï¸ **è¡°å‡é…ç½®**ï¼šåŠè¡°æœŸå’Œè¡°å‡ç‡

#### ç»´æŒå±æ€§å¹³è¡¡

**ç­–ç•¥å»ºè®®ï¼š**
1. **æ¯æ—¥å¹³è¡¡**ï¼šæ¯å¤©è‡³å°‘å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œè¦†ç›–ä¸åŒå±æ€§
2. **é‡ç‚¹è¡¥å¼º**ï¼šä¼˜å…ˆå…³æ³¨å¥åº·åº¦ < 40% çš„å±æ€§
3. **é•¿æœŸè§„åˆ’**ï¼šå»ºç«‹ä¹ æƒ¯ï¼ŒæŒç»­å®Œæˆç›¸å…³ä»»åŠ¡

**ç¤ºä¾‹åœºæ™¯ï¼š**
```
å‘¨ä¸€ï¼šè¿åŠ¨30åˆ†é’Ÿï¼ˆ+10 VITï¼‰
å‘¨äºŒï¼šé˜…è¯»æŠ€æœ¯ä¹¦ç±ï¼ˆ+10 INTï¼‰
å‘¨ä¸‰ï¼šè§„åˆ’ä¸‹å‘¨ä»»åŠ¡ï¼ˆ+10 MNGï¼‰
å‘¨å››ï¼šå†™ä¸€ç¯‡åšå®¢ï¼ˆ+10 CREï¼‰
å‘¨äº”ï¼šè¿åŠ¨+é˜…è¯»ï¼ˆ+10 VIT, +10 INTï¼‰
```

### 5.2 å¼€å‘è€…è§†è§’

#### ä¸ºä»»åŠ¡é…ç½®å±æ€§å¥–åŠ±

```typescript
// å•å±æ€§ä»»åŠ¡
addQuest({
  title: "è·‘æ­¥5å…¬é‡Œ",
  attributes: ['vit'],
  // ... å…¶ä»–é…ç½®
});

// å¤šå±æ€§ä»»åŠ¡
addQuest({
  title: "å®Œæˆé¡¹ç›®éœ€æ±‚æ–‡æ¡£",
  attributes: ['int', 'mng'],  // åŒæ—¶è·å¾—æ™ºåŠ›å’Œç®¡ç†
  // ... å…¶ä»–é…ç½®
});
```

#### ä»»åŠ¡å®Œæˆæ—¶çš„å±æ€§å¤„ç†

ç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š
1. è°ƒç”¨ `addDynamicAttribute()` æ·»åŠ å¯è¡°å‡å±æ€§
2. åˆ›å»º `AttributeRecord` è®°å½•
3. æ›´æ–°æ€»å±æ€§å€¼
4. è®°å½•åˆ°äº¤æ˜“å†å²

```typescript
// å®Œæˆä»»åŠ¡æ—¶ï¼ˆè‡ªåŠ¨è°ƒç”¨ï¼‰
completeQuest(questId);
// â†“
// å†…éƒ¨ä¼šä¸ºæ¯ä¸ª attribute è°ƒç”¨ï¼š
addDynamicAttribute(attr, 10, `å®Œæˆä»»åŠ¡: ${quest.title}`, questId);
```

---

## 6. æŠ€æœ¯å®ç°

### 6.1 ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         UI Layer (React)                â”‚
â”‚  - AttributeBalancePage                 â”‚
â”‚  - AttributesDetailPage                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      State Management (Zustand)         â”‚
â”‚  - GameStore                            â”‚
â”‚  - Attribute Balance Actions            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Persistence Layer               â”‚
â”‚  - LocalStorage (per user)              â”‚
â”‚  - AttributeRecord[]                    â”‚
â”‚  - AttributeDecayConfig                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 æ ¸å¿ƒä»£ç å®ç°

#### æ·»åŠ åŠ¨æ€å±æ€§

```typescript
addDynamicAttribute: (
  attr: AttributeType,
  amount: number,
  reason: string,
  relatedId?: string,
  halfLifeDays?: number
) => {
  const state = get();
  const config = state.attributeDecayConfig[attr];

  // åˆ›å»ºå±æ€§è®°å½•
  const record: AttributeRecord = {
    id: Date.now().toString() + Math.random().toString(36).substr(2, 9),
    attribute: attr,
    amount,
    gainedAt: Date.now(),
    reason,
    relatedId,
    decayRate: config.decayRate,
    halfLifeDays: halfLifeDays || config.halfLifeDays,
    currentValue: amount,
    decayedAt: Date.now(),
  };

  // æ·»åŠ åˆ°è®°å½•åˆ—è¡¨å¹¶æ›´æ–°æ€»å±æ€§å€¼
  set((state) => ({
    attributeRecords: [...state.attributeRecords, record],
    attributes: {
      ...state.attributes,
      [attr]: state.attributes[attr] + amount,
    },
  }));

  // è®°å½•å±æ€§å˜åŒ–
  get().addAttributeChange(
    attr,
    state.attributes[attr],
    state.attributes[attr] + amount,
    reason,
    relatedId
  );
}
```

#### è®¡ç®—å±æ€§è¡°å‡

```typescript
calculateAttributeDecay: () => {
  const state = get();
  const now = Date.now();
  const oneDayMs = 24 * 60 * 60 * 1000;

  let updatedRecords = [...state.attributeRecords];
  const attributeChanges: Record<AttributeType, number> = {
    int: 0, vit: 0, mng: 0, cre: 0
  };

  // è®¡ç®—æ¯æ¡è®°å½•çš„è¡°å‡
  updatedRecords = updatedRecords.map(record => {
    const config = state.attributeDecayConfig[record.attribute];
    if (!config.enabled) return record;

    const lastDecay = record.decayedAt || record.gainedAt;
    const daysPassed = (now - lastDecay) / oneDayMs;

    if (daysPassed < 1) return record; // ä¸åˆ°ä¸€å¤©ï¼Œä¸è¡°å‡

    // ä½¿ç”¨æŒ‡æ•°è¡°å‡å…¬å¼
    const decayMultiplier = Math.pow(1 - config.decayRate, Math.floor(daysPassed));
    const newValue = Math.max(record.amount * decayMultiplier, config.minValue);
    const decayAmount = record.currentValue - newValue;

    if (decayAmount > 0.01) {
      attributeChanges[record.attribute] += -decayAmount;
    }

    return {
      ...record,
      currentValue: newValue,
      decayedAt: now,
    };
  }).filter(record => record.currentValue > 0.01); // ç§»é™¤å·²è¡°å‡åˆ°0çš„è®°å½•

  // æ›´æ–°æ€»å±æ€§å€¼
  const newAttributes = { ...state.attributes };
  Object.keys(attributeChanges).forEach(attr => {
    const change = attributeChanges[attr as AttributeType];
    if (change !== 0) {
      const oldValue = newAttributes[attr as AttributeType];
      newAttributes[attr as AttributeType] = Math.max(0, oldValue + change);

      // è®°å½•å±æ€§å˜åŒ–
      if (Math.abs(change) > 0.01) {
        get().addAttributeChange(
          attr as AttributeType,
          oldValue,
          newAttributes[attr as AttributeType],
          'å±æ€§è‡ªç„¶è¡°å‡',
          'decay'
        );
      }
    }
  });

  set({
    attributeRecords: updatedRecords,
    attributes: newAttributes,
    lastDecayCalculation: now,
  });
}
```

#### è®¡ç®—å¥åº·åº¦

```typescript
getAttributeHealth: (attr: AttributeType) => {
  const state = get();
  const now = Date.now();
  const thirtyDaysAgo = now - (30 * 24 * 60 * 60 * 1000);

  // è·å–è¯¥å±æ€§æœ€è¿‘30å¤©çš„è®°å½•
  const recentRecords = state.attributeRecords.filter(
    r => r.attribute === attr && r.gainedAt >= thirtyDaysAgo
  );

  if (recentRecords.length === 0) return 0;

  // è®¡ç®—å¹³å‡å‰©ä½™å€¼ç™¾åˆ†æ¯”
  const avgRemainingPercent = recentRecords.reduce((sum, r) =>
    sum + (r.currentValue / r.amount) * 100, 0
  ) / recentRecords.length;

  return Math.round(avgRemainingPercent);
}
```

### 6.3 è§¦å‘æ—¶æœº

#### è‡ªåŠ¨è§¦å‘
```typescript
// æ¯æ—¥ç™»å½•æ—¶è‡ªåŠ¨è®¡ç®—è¡°å‡
checkDailyLogin: () => {
  // ...ç™»å½•é€»è¾‘...

  // è®¡ç®—å±æ€§è¡°å‡ï¼ˆæ¯æ—¥ç™»å½•æ—¶æ£€æŸ¥ï¼‰
  get().calculateAttributeDecay();

  // ...å…¶ä»–é€»è¾‘...
}
```

#### æ‰‹åŠ¨è§¦å‘ï¼ˆå¯æ‰©å±•ï¼‰
```typescript
// å¯ä»¥åœ¨è®¾ç½®é¡µé¢æ·»åŠ "ç«‹å³è®¡ç®—è¡°å‡"æŒ‰é’®
// æˆ–åœ¨ç‰¹å®šäº‹ä»¶ï¼ˆå¦‚ç­¾åˆ°ã€å®Œæˆä¹ æƒ¯ï¼‰æ—¶è§¦å‘
```

---

## 7. æ•°æ®ç»“æ„

### 7.1 TypeScript ç±»å‹å®šä¹‰

#### AttributeRecord

```typescript
interface AttributeRecord {
  id: string;                 // å”¯ä¸€æ ‡è¯†
  attribute: AttributeType;   // å±æ€§ç±»å‹ ('int' | 'vit' | 'mng' | 'cre')
  amount: number;             // åˆå§‹è·å¾—çš„å±æ€§ç‚¹æ•°
  gainedAt: number;           // è·å¾—æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
  reason: string;             // è·å¾—åŸå› ï¼ˆå¦‚"å®Œæˆä»»åŠ¡ï¼šè·‘æ­¥"ï¼‰
  relatedId?: string;         // å…³è”IDï¼ˆå¦‚ä»»åŠ¡IDï¼‰
  decayRate: number;          // è¡°å‡é€Ÿç‡ï¼ˆ0.05 = 5%/å¤©ï¼‰
  halfLifeDays: number;       // åŠè¡°æœŸï¼ˆå¤©æ•°ï¼‰
  currentValue: number;       // å½“å‰å‰©ä½™å€¼
  decayedAt?: number;         // æœ€åä¸€æ¬¡è¡°å‡è®¡ç®—çš„æ—¶é—´æˆ³
}
```

#### AttributeDecayConfig

```typescript
interface AttributeDecayConfig {
  attribute: AttributeType;   // å±æ€§ç±»å‹
  enabled: boolean;           // æ˜¯å¦å¯ç”¨è¡°å‡
  halfLifeDays: number;       // åŠè¡°æœŸï¼ˆå¤©æ•°ï¼‰
  minValue: number;           // æœ€å°ä¿ç•™å€¼ï¼ˆä¸ä¼šè¡°å‡åˆ°æ­¤å€¼ä»¥ä¸‹ï¼‰
  decayRate: number;          // æ¯æ—¥è¡°å‡ç‡ï¼ˆ0-1ä¹‹é—´çš„å°æ•°ï¼‰
}
```

#### GameState æ‰©å±•

```typescript
interface GameState {
  // ...ç°æœ‰å­—æ®µ...

  // å±æ€§å¹³è¡¡ç³»ç»Ÿ
  attributeRecords: AttributeRecord[];                      // å¯è¡°å‡çš„å±æ€§è®°å½•
  attributeDecayConfig: Record<AttributeType, AttributeDecayConfig>; // è¡°å‡é…ç½®
  lastDecayCalculation?: number;                            // æœ€åä¸€æ¬¡è®¡ç®—è¡°å‡çš„æ—¶é—´æˆ³
}
```

### 7.2 æ•°æ®å­˜å‚¨ç¤ºä¾‹

```json
{
  "attributeRecords": [
    {
      "id": "1704067200000abc123",
      "attribute": "vit",
      "amount": 10,
      "gainedAt": 1704067200000,
      "reason": "å®Œæˆä»»åŠ¡: è·‘æ­¥5å…¬é‡Œ",
      "relatedId": "quest-123",
      "decayRate": 0.10,
      "halfLifeDays": 7,
      "currentValue": 7.29,
      "decayedAt": 1704326400000
    },
    {
      "id": "1704153600000def456",
      "attribute": "int",
      "amount": 10,
      "gainedAt": 1704153600000,
      "reason": "å®Œæˆä»»åŠ¡: é˜…è¯»ã€Šæ·±åº¦å­¦ä¹ ã€‹ç¬¬3ç« ",
      "relatedId": "quest-456",
      "decayRate": 0.05,
      "halfLifeDays": 14,
      "currentValue": 9.5,
      "decayedAt": 1704326400000
    }
  ],
  "attributeDecayConfig": {
    "int": {
      "attribute": "int",
      "enabled": true,
      "halfLifeDays": 14,
      "minValue": 0,
      "decayRate": 0.05
    },
    "vit": {
      "attribute": "vit",
      "enabled": true,
      "halfLifeDays": 7,
      "minValue": 0,
      "decayRate": 0.10
    },
    "mng": {
      "attribute": "mng",
      "enabled": true,
      "halfLifeDays": 10,
      "minValue": 0,
      "decayRate": 0.07
    },
    "cre": {
      "attribute": "cre",
      "enabled": true,
      "halfLifeDays": 12,
      "minValue": 0,
      "decayRate": 0.06
    }
  },
  "lastDecayCalculation": 1704326400000
}
```

---

## 8. API æ¥å£

### 8.1 GameStore Actions

#### addDynamicAttribute
æ·»åŠ å¯è¡°å‡çš„åŠ¨æ€å±æ€§

```typescript
addDynamicAttribute(
  attr: AttributeType,      // å±æ€§ç±»å‹
  amount: number,           // å¢åŠ çš„æ•°é‡
  reason: string,           // åŸå› è¯´æ˜
  relatedId?: string,       // å…³è”IDï¼ˆå¯é€‰ï¼‰
  halfLifeDays?: number     // è‡ªå®šä¹‰åŠè¡°æœŸï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨é…ç½®å€¼ï¼‰
): void
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```typescript
// å®Œæˆè¿åŠ¨ä»»åŠ¡ï¼Œè·å¾—10ç‚¹æ´»åŠ›ï¼Œä½¿ç”¨é»˜è®¤åŠè¡°æœŸï¼ˆ7å¤©ï¼‰
addDynamicAttribute('vit', 10, 'å®Œæˆä»»åŠ¡: è·‘æ­¥5å…¬é‡Œ', 'quest-123');

// å­¦ä¹ æ–°æŠ€èƒ½ï¼Œè·å¾—15ç‚¹æ™ºåŠ›ï¼Œè‡ªå®šä¹‰åŠè¡°æœŸä¸º30å¤©
addDynamicAttribute('int', 15, 'å®Œæˆè¯¾ç¨‹: æœºå™¨å­¦ä¹ ', 'quest-456', 30);
```

---

#### calculateAttributeDecay
è®¡ç®—æ‰€æœ‰å±æ€§çš„è¡°å‡

```typescript
calculateAttributeDecay(): void
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```typescript
// æ¯æ—¥ç™»å½•æ—¶è‡ªåŠ¨è°ƒç”¨
checkDailyLogin();  // å†…éƒ¨ä¼šè°ƒç”¨ calculateAttributeDecay()

// æˆ–æ‰‹åŠ¨è§¦å‘
calculateAttributeDecay();
```

**æ‰§è¡Œé€»è¾‘ï¼š**
1. éå†æ‰€æœ‰ `attributeRecords`
2. è®¡ç®—æ¯æ¡è®°å½•è·ç¦»ä¸Šæ¬¡è¡°å‡çš„å¤©æ•°
3. åº”ç”¨æŒ‡æ•°è¡°å‡å…¬å¼æ›´æ–° `currentValue`
4. ç§»é™¤ `currentValue < 0.01` çš„è®°å½•
5. æ›´æ–°æ€»å±æ€§å€¼
6. è®°å½•å±æ€§å˜åŒ–åˆ°äº¤æ˜“å†å²

---

#### getAttributeHealth
è·å–æŒ‡å®šå±æ€§çš„å¥åº·åº¦è¯„åˆ†ï¼ˆ0-100ï¼‰

```typescript
getAttributeHealth(attr: AttributeType): number
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```typescript
const vitHealth = getAttributeHealth('vit');
console.log(`æ´»åŠ›å¥åº·åº¦: ${vitHealth}%`);

if (vitHealth < 40) {
  console.log('âš ï¸ æ´»åŠ›å¥åº·åº¦è¿‡ä½ï¼Œå»ºè®®å®Œæˆè¿åŠ¨ä»»åŠ¡ï¼');
}
```

**è¿”å›å€¼ï¼š**
- `0-39`ï¼šå±é™©ï¼Œéœ€è¦ç«‹å³å…³æ³¨
- `40-69`ï¼šä¸€èˆ¬ï¼Œéœ€è¦å®šæœŸç»´æŠ¤
- `70-100`ï¼šå¥åº·ï¼Œä¿æŒè‰¯å¥½

---

#### getDecayingAttributes
è·å–æ‰€æœ‰æ­£åœ¨è¡°å‡çš„å±æ€§è®°å½•

```typescript
getDecayingAttributes(): AttributeRecord[]
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```typescript
const activeRecords = getDecayingAttributes();
console.log(`å…±æœ‰ ${activeRecords.length} æ¡æ´»è·ƒçš„å±æ€§è®°å½•`);

// æŒ‰å±æ€§åˆ†ç»„
const groupedByAttr = activeRecords.reduce((acc, record) => {
  if (!acc[record.attribute]) acc[record.attribute] = [];
  acc[record.attribute].push(record);
  return acc;
}, {} as Record<AttributeType, AttributeRecord[]>);
```

---

#### updateDecayConfig
æ›´æ–°æŒ‡å®šå±æ€§çš„è¡°å‡é…ç½®

```typescript
updateDecayConfig(
  attr: AttributeType,
  config: Partial<AttributeDecayConfig>
): void
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```typescript
// ä¸´æ—¶é™ä½æ´»åŠ›è¡°å‡é€Ÿç‡ï¼ˆå¦‚ç”¨æˆ·å—ä¼¤æœŸé—´ï¼‰
updateDecayConfig('vit', {
  decayRate: 0.05,      // ä»10%é™ä½åˆ°5%
  halfLifeDays: 14      // ä»7å¤©å»¶é•¿åˆ°14å¤©
});

// ç¦ç”¨æŸä¸ªå±æ€§çš„è¡°å‡
updateDecayConfig('int', {
  enabled: false
});

// æ¢å¤é»˜è®¤é…ç½®
updateDecayConfig('vit', {
  decayRate: 0.10,
  halfLifeDays: 7,
  enabled: true
});
```

---

### 8.2 React Hook ä½¿ç”¨

```typescript
import { useGameStore } from '@/store/gameStore';

function MyComponent() {
  // è·å–å±æ€§å’Œæ–¹æ³•
  const {
    attributes,
    attributeRecords,
    getAttributeHealth,
    getDecayingAttributes,
  } = useGameStore();

  // è®¡ç®—å¥åº·åº¦
  const vitHealth = getAttributeHealth('vit');

  // è·å–æ´»è·ƒè®°å½•
  const activeRecords = getDecayingAttributes();

  return (
    <div>
      <p>æ´»åŠ›å€¼: {attributes.vit}</p>
      <p>å¥åº·åº¦: {vitHealth}%</p>
      <p>æ´»è·ƒè®°å½•æ•°: {activeRecords.length}</p>
    </div>
  );
}
```

---

## 9. æœ€ä½³å®è·µ

### 9.1 å±æ€§å¢ç›Šè®¾è®¡

#### æ¨èçš„å±æ€§å¢ç›Šé‡
```typescript
// å°å‹ä»»åŠ¡ï¼ˆ15-30åˆ†é’Ÿï¼‰
amount: 5-10

// ä¸­å‹ä»»åŠ¡ï¼ˆ1-2å°æ—¶ï¼‰
amount: 15-20

// å¤§å‹ä»»åŠ¡ï¼ˆåŠå¤©ä»¥ä¸Šï¼‰
amount: 25-30

// é•¿æœŸé¡¹ç›®é‡Œç¨‹ç¢‘
amount: 50+
```

#### å¤šå±æ€§ä»»åŠ¡è®¾è®¡
```typescript
// å¥½çš„è®¾è®¡ï¼šç›¸å…³æ€§å¼º
{
  title: "å®Œæˆé¡¹ç›®éœ€æ±‚æ–‡æ¡£",
  attributes: ['int', 'mng'],  // éœ€è¦æ€è€ƒ+è§„åˆ’
  expReward: 30,
  coinReward: 20
}

// é¿å…ï¼šå¼ºè¡Œå…³è”
{
  title: "è·‘æ­¥",
  attributes: ['vit', 'int', 'mng', 'cre'],  // âŒ å…³è”æ€§å¼±
}
```

### 9.2 è¡°å‡é…ç½®è°ƒæ•´å»ºè®®

#### åœºæ™¯1ï¼šç”¨æˆ·åé¦ˆè¡°å‡å¤ªå¿«
```typescript
// é™ä½è¡°å‡ç‡æˆ–å»¶é•¿åŠè¡°æœŸ
updateDecayConfig('vit', {
  decayRate: 0.07,      // ä»10%é™åˆ°7%
  halfLifeDays: 10      // ä»7å¤©å»¶é•¿åˆ°10å¤©
});
```

#### åœºæ™¯2ï¼šå¸Œæœ›é¼“åŠ±æŸé¡¹å±æ€§
```typescript
// å»¶é•¿è¯¥å±æ€§çš„ä¿ç•™æ—¶é—´
updateDecayConfig('cre', {
  halfLifeDays: 20,     // ä»12å¤©å»¶é•¿åˆ°20å¤©
  decayRate: 0.035      // ç›¸åº”è°ƒæ•´è¡°å‡ç‡
});
```

#### åœºæ™¯3ï¼šæµ‹è¯•æˆ–ç‰¹æ®Šæ´»åŠ¨
```typescript
// ä¸´æ—¶ç¦ç”¨è¡°å‡
Object.keys(attributeDecayConfig).forEach(attr => {
  updateDecayConfig(attr as AttributeType, { enabled: false });
});
```

### 9.3 æ€§èƒ½ä¼˜åŒ–

#### æ‰¹é‡å¤„ç†
```typescript
// âœ… å¥½çš„åšæ³•ï¼šåœ¨æ¯æ—¥ç™»å½•æ—¶æ‰¹é‡è®¡ç®—
checkDailyLogin() {
  calculateAttributeDecay();  // ä¸€æ¬¡æ€§è®¡ç®—æ‰€æœ‰è¡°å‡
}

// âŒ é¿å…ï¼šé¢‘ç¹è°ƒç”¨è¡°å‡è®¡ç®—
setInterval(() => {
  calculateAttributeDecay();  // ä¸è¦è¿™æ ·åš
}, 1000);
```

#### è®°å½•æ¸…ç†
```typescript
// å®šæœŸæ¸…ç†è¿‡æœŸè®°å½•ï¼ˆå¯é€‰ï¼‰
cleanupOldRecords() {
  const sixtyDaysAgo = Date.now() - (60 * 24 * 60 * 60 * 1000);

  set(state => ({
    attributeRecords: state.attributeRecords.filter(
      record => record.gainedAt > sixtyDaysAgo
    )
  }));
}
```

---

## 10. å¸¸è§é—®é¢˜

### Q1: å¦‚æœç”¨æˆ·é•¿æ—¶é—´ä¸ç™»å½•ï¼Œå±æ€§ä¼šå½’é›¶å—ï¼Ÿ

**A:** ä¸ä¼šã€‚è¡°å‡è®¡ç®—åªåœ¨ç”¨æˆ·ç™»å½•æ—¶è§¦å‘ï¼Œæ ¹æ®è·ç¦»ä¸Šæ¬¡è®¡ç®—çš„å¤©æ•°è¿›è¡Œè¡°å‡ã€‚å³ä½¿ç”¨æˆ·1å¹´ä¸ç™»å½•ï¼Œå±æ€§ä¹Ÿåªä¼šè¡°å‡åˆ°è¯¥æ—¶é—´å¯¹åº”çš„å€¼ï¼Œè€Œä¸ä¼šå½’é›¶ï¼ˆé™¤éè¡°å‡åˆ° < 0.01ï¼‰ã€‚

### Q2: å¯ä»¥æ¢å¤å·²ç»è¡°å‡çš„å±æ€§å—ï¼Ÿ

**A:** ä¸èƒ½ç›´æ¥æ¢å¤å·²è¡°å‡çš„éƒ¨åˆ†ï¼Œä½†å¯ä»¥é€šè¿‡å®Œæˆæ–°ä»»åŠ¡è·å¾—æ–°çš„å±æ€§å¢ç›Šã€‚æ–°å¢ç›Šä¼šåˆ›å»ºæ–°çš„ `AttributeRecord`ï¼Œç‹¬ç«‹è¡°å‡ã€‚

### Q3: å¦‚ä½•æš‚åœæŸä¸ªå±æ€§çš„è¡°å‡ï¼Ÿ

**A:** ä½¿ç”¨ `updateDecayConfig` å°† `enabled` è®¾ä¸º `false`ï¼š
```typescript
updateDecayConfig('vit', { enabled: false });
```

### Q4: å±æ€§è¡°å‡ä¼šå½±å“å·²å®Œæˆçš„ä»»åŠ¡å—ï¼Ÿ

**A:** ä¸ä¼šã€‚ä»»åŠ¡å®ŒæˆçŠ¶æ€æ˜¯æ°¸ä¹…çš„ï¼Œå±æ€§è¡°å‡åªå½±å“å½“å‰å±æ€§å€¼ï¼Œä¸ä¼šæ”¹å˜å†å²è®°å½•ã€‚

### Q5: å¦‚ä½•è°ƒæ•´å…¨å±€è¡°å‡é€Ÿåº¦ï¼Ÿ

**A:** å¯ä»¥æ‰¹é‡è°ƒæ•´æ‰€æœ‰å±æ€§çš„ `decayRate`ï¼š
```typescript
['int', 'vit', 'mng', 'cre'].forEach(attr => {
  const config = attributeDecayConfig[attr];
  updateDecayConfig(attr as AttributeType, {
    decayRate: config.decayRate * 0.8  // å‡æ…¢20%
  });
});
```

---

## 11. æœªæ¥æ‰©å±•

### 11.1 å¯èƒ½çš„å¢å¼ºåŠŸèƒ½

1. **å±æ€§å…±é¸£ç³»ç»Ÿ**
   - å½“æŸä¸ªå±æ€§æŒç»­ä¿æŒé«˜å¥åº·åº¦æ—¶ï¼Œå…¶ä»–å±æ€§è·å¾—é¢å¤–ä¿æŠ¤
   - ä¾‹å¦‚ï¼šæ™ºåŠ›å¥åº·åº¦ > 80% æ—¶ï¼Œåˆ›é€ è¡°å‡é€Ÿç‡ -20%

2. **æˆå°±å¥–åŠ±**
   - è§£é”æˆå°±åå»¶é•¿ç›¸å…³å±æ€§çš„åŠè¡°æœŸ
   - ä¾‹å¦‚ï¼š"å­¦ä¹ å¤§å¸ˆ"æˆå°± â†’ INTåŠè¡°æœŸ +7å¤©

3. **è£…å¤‡/é“å…·ç³»ç»Ÿ**
   - ä½¿ç”¨é“å…·ä¸´æ—¶å‡ç¼“æˆ–åœæ­¢è¡°å‡
   - ä¾‹å¦‚ï¼š"çŸ¥è¯†ç»“æ™¶"é“å…· â†’ INTè¡°å‡åœæ­¢24å°æ—¶

4. **å±æ€§å¿«ç…§å¯¹æ¯”**
   - è®°å½•æ¯å‘¨/æ¯æœˆçš„å±æ€§å¿«ç…§
   - å¯è§†åŒ–å±æ€§å˜åŒ–è¶‹åŠ¿

5. **æ™ºèƒ½æé†’**
   - å½“æŸå±æ€§å¥åº·åº¦è·Œç ´é˜ˆå€¼æ—¶å‘é€é€šçŸ¥
   - æ¨èç›¸å…³ä»»åŠ¡æ¥æå‡è¯¥å±æ€§

### 11.2 æ•°æ®åˆ†ææ‰©å±•

```typescript
// è·å–å±æ€§å†å²è¶‹åŠ¿
getAttributeTrend(attr: AttributeType, days: number): number[] {
  // è¿”å›è¿‡å»Nå¤©çš„å±æ€§å€¼æ•°ç»„
}

// é¢„æµ‹å±æ€§æœªæ¥å€¼
predictAttributeValue(attr: AttributeType, daysFromNow: number): number {
  // åŸºäºå½“å‰è¡°å‡è®°å½•é¢„æµ‹Nå¤©åçš„å€¼
}

// è·å–å±æ€§å¹³è¡¡æŒ‡æ•°
getBalanceIndex(): number {
  // 0-100ï¼Œæ•°å€¼è¶Šé«˜è¡¨ç¤ºå››ç»´å±æ€§è¶Šå¹³è¡¡
}
```

---

## 12. æ€»ç»“

å±æ€§å¹³è¡¡ç³»ç»Ÿé€šè¿‡**åŠ¨æ€è¡°å‡æœºåˆ¶**ï¼Œå°†æ¸¸æˆåŒ–æ¿€åŠ±ä¸ç°å®è§„å¾‹ç›¸ç»“åˆï¼Œé¼“åŠ±ç”¨æˆ·ï¼š

âœ… æŒç»­å®Œæˆä»»åŠ¡ï¼Œè€ŒéçŸ­æœŸå†²åˆº
âœ… å…³æ³¨å…¨é¢å‘å±•ï¼Œç»´æŒå±æ€§å¹³è¡¡
âœ… å»ºç«‹é•¿æœŸä¹ æƒ¯ï¼Œä¿æŒæ´»è·ƒçŠ¶æ€

ç³»ç»Ÿè®¾è®¡éµå¾ª**çœŸå®æ„Ÿã€å¯è§æ€§ã€å¯æ§æ€§ã€æ¸è¿›æ€§**åŸåˆ™ï¼Œä¸ºç”¨æˆ·æä¾›æ¸…æ™°çš„åé¦ˆå’Œæ¿€åŠ±æœºåˆ¶ã€‚

---

## é™„å½•

### A. æ•°å­¦æ¨å¯¼

#### åŠè¡°æœŸä¸è¡°å‡ç‡çš„å…³ç³»

å·²çŸ¥åŠè¡°æœŸä¸º `t_half` å¤©ï¼Œæ±‚æ¯æ—¥è¡°å‡ç‡ `r`ï¼š

```
0.5 = (1 - r)^t_half
ln(0.5) = t_half Ã— ln(1 - r)
ln(1 - r) = ln(0.5) / t_half
1 - r = e^(ln(0.5) / t_half)
r = 1 - e^(ln(0.5) / t_half)
```

æˆ–ä½¿ç”¨è¿‘ä¼¼å…¬å¼ï¼š
```
r â‰ˆ 0.693 / t_half
```

**éªŒè¯ï¼š**
- VITï¼šåŠè¡°æœŸ 7 å¤© â†’ r â‰ˆ 0.693/7 â‰ˆ 0.099 â‰ˆ 10% âœ“
- INTï¼šåŠè¡°æœŸ 14 å¤© â†’ r â‰ˆ 0.693/14 â‰ˆ 0.0495 â‰ˆ 5% âœ“

### B. è¡°å‡æ›²çº¿å¯è§†åŒ–

```
100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
 90% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
 80% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
 70% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
 60% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
 50% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â† åŠè¡°æœŸ
 40% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
 30% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
 20% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
 10% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
  0% |â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
     0        7       14       21       28  (å¤©)

     â–ˆ = VIT (10%/å¤©)
     â–“ = MNG (7%/å¤©)
     â–‘ = INT (5%/å¤©)
```

### C. å‚è€ƒèµ„æ–™

- [æŒ‡æ•°è¡°å‡ - Wikipedia](https://en.wikipedia.org/wiki/Exponential_decay)
- [æ¸¸æˆåŒ–è®¾è®¡ç†è®º](https://en.wikipedia.org/wiki/Gamification)
- [è‰¾å®¾æµ©æ–¯é—å¿˜æ›²çº¿](https://en.wikipedia.org/wiki/Forgetting_curve)

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0.0
**æœ€åæ›´æ–°ï¼š** 2025-01-06
**ä½œè€…ï¼š** LifeRPG Development Team
