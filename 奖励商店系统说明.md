# LifeRPG 奖励商店系统说明

## 🎁 系统概览

本次更新添加了完整的**分类金币系统**和**奖励商店**，实现了"努力工作换取奖励"的正向循环机制。

---

## ✨ 核心特性

### 1. 分类金币系统

**五种金币类型**：

| 金币类型 | 图标 | 颜色 | 获取方式 | 用途 |
|---------|------|------|---------|------|
| 智慧币 (INT) | 🧠 | 蓝色 | 学习、科研类任务 | 兑换学习类奖励（游戏时间券、学者称号等） |
| 活力币 (VIT) | ❤️ | 红色 | 健康、运动类任务 | 兑换放纵美食、健将称号等 |
| 管理币 (MNG) | 📊 | 紫色 | 规划、管理类任务 | 兑换懒散日、时间管理大师称号等 |
| 创意币 (CRE) | 💡 | 橙色 | 创作、创新类任务 | 兑换自由创作日、艺术家称号等 |
| 通用币 (Universal) | 💰 | 绿色 | 任何任务都会获得 | 可用于购买任何物品 |

**金币分配机制**：

- 完成任务时：
  - **70%** 的金币为对应属性的分类金币
  - **30%** 的金币自动转为通用金币
- 例如：完成一个 INT 属性任务，获得 100 金币
  - 智慧币 +100
  - 通用币 +30
  - 总金币 +130

### 2. 奖励商店分类

**五大商店类别**，共 40+ 物品：

#### 🍔 放纵奖励 (Indulgence)
**设计理念**：只有在对应领域努力过，才能享受放纵

- **放纵美食** (50 活力币)
  - 奖励自己一顿大餐
  - 需要通过健康饮食任务获得活力币才能兑换

- **游戏时间券** (80 智慧币)
  - 2小时无罪恶感游戏时间
  - 需要通过学习任务获得智慧币

- **懒散日** (120 管理币，限购2次)
  - 24小时完全放松
  - 需要通过高效工作获得管理币

- **自由创作日** (100 创意币)
  - 放下所有任务，自由创作
  - 需要创作类任务获得创意币

- **电影之夜** (60 通用币)
  - 3小时电影马拉松
  - 任何金币都可购买

#### ⚡ 能力提升 (Boost)
**任何金币都可购买**

- **经验加成卡**：
  - 30分钟 (+50% EXP) - 30金币
  - 1小时 (+50% EXP) - 50金币
  - 3小时 (+100% EXP) - 150金币 [精选]

- **金币加成卡**：
  - 1天 (+50% 金币) - 80金币

- **属性点直购**（需要对应金币）：
  - INT +5 - 200 智慧币
  - VIT +5 - 200 活力币
  - MNG +5 - 200 管理币
  - CRE +5 - 200 创意币

#### 🎨 装饰外观 (Decoration)
**个性化定制**

- **头像边框**：
  - 青铜边框 - 50金币
  - 白银边框 - 100金币 (需要等级10)
  - 黄金边框 - 200金币 (需要等级20)

- **专属称号**（需要对应金币 + 等级15）：
  - 学者 - 150 智慧币
  - 运动健将 - 150 活力币
  - 时间管理大师 - 150 管理币
  - 艺术家 - 150 创意币

- **主题皮肤**（需要等级25）：
  - 极光主题 - 300金币
  - 日落主题 - 300金币

#### 🔧 功能解锁 (Functional)
**高级功能**

- **属性重置卷** (500金币 + 50成就点数)
  - 限购3次
  - 需要等级20
  - 重置所有属性点重新分配

- **任务模板**：
  - 学习计划模板 - 100 智慧币
  - 健身计划模板 - 100 活力币

- **自定义提醒** (150金币)
  - 设置每日任务提醒

- **高级数据导出** (200金币 + 30成就点数)
  - 需要等级15
  - 导出 PDF/Excel 报告

#### 🌟 特殊限定 (Special)
**精选物品**

- **神秘宝箱** (100金币) [精选]
  - 随机获得大量金币、经验或稀有物品

- **幸运符** (120金币 + 20成就点数) [精选]
  - 24小时内所有奖励 +20%

- **周末通行证** (200金币，限购1次) [限时]
  - 周末双倍经验和金币
  - 持续48小时

---

## 🎮 使用指南

### 如何获得金币

1. **完成任务**：
   - 每个任务都有对应的属性（INT/VIT/MNG/CRE）
   - 完成任务自动获得该类型金币 + 通用币
   - 金币会自动累计在商店界面显示

2. **金币余额查看**：
   - 点击导航栏的购物袋图标 🛍️
   - 顶部显示所有金币类型的余额
   - 包括成就点数

### 如何购买奖励

1. **浏览商店**：
   - 点击顶部类别筛选（全部/放纵/提升/装饰/功能/特殊）
   - 查看每个物品的价格、效果、要求

2. **检查购买条件**：
   - ✅ 金币足够（特定类型或任意类型）
   - ✅ 等级满足要求
   - ✅ 成就点数足够（如有要求）
   - ✅ 未达购买上限

3. **点击购买按钮**：
   - 绿色按钮：可以购买
   - 灰色按钮：无法购买（显示原因）
   - 已购买：显示对勾

### 物品稀有度

- **普通** (灰色)：基础物品，容易获得
- **稀有** (蓝色)：需要一定金币和等级
- **史诗** (紫色)：高级物品，要求较高
- **传说** (橙色)：顶级物品，需要大量金币和点数

---

## 📊 平衡设计

### 放纵与努力的平衡

**核心设计理念**：
> 只有在对应领域努力过，才能享受该领域的放纵

**示例**：
- 想要兑换"放纵美食"（暴食一顿）？
  - 必须先完成健康饮食相关的任务
  - 获得足够的活力币（VIT）
  - 这样放纵才有意义，不会产生罪恶感

- 想要兑换"游戏时间券"？
  - 必须先完成学习任务
  - 获得智慧币（INT）
  - 学习之后的娱乐更加心安理得

### 金币获取与消耗

**获取速度**：
- 简单任务：20-50 金币
- 中等任务：50-100 金币
- 困难任务：100-200 金币
- 每日登录：10+ 金币

**消耗参考**：
- 小额放纵：50-80 金币（1-2个任务）
- 能力提升：30-150 金币
- 装饰外观：50-300 金币
- 功能解锁：100-500 金币

**建议策略**：
- 定期完成日常任务积累通用币
- 专注某个属性来购买对应的高级物品
- 平衡发展以解锁需要多种金币的物品

---

## 🔧 技术实现

### 新增文件

1. **src/data/rewards.ts**
   - 40+ 奖励物品定义
   - 金币类型信息
   - 类别名称和描述

2. **src/components/ShopPage.tsx**
   - 商店主页面组件
   - 金币余额展示
   - 类别筛选
   - 购买逻辑

### 修改文件

1. **src/store/gameStore.ts**
   - 添加 `categorizedCoins` 状态
   - 修改 `completeQuest` 分配分类金币
   - 添加 `purchaseReward` 购买方法
   - 添加 `spendCategorizedCoins` 等辅助方法

2. **src/types/game.ts**
   - 添加 `categorizedCoins` 类型定义
   - 添加 `purchasedRewards` 数组
   - 扩展 GameActions 接口

3. **src/components/Navigation.tsx**
   - 添加商店图标（购物袋）

4. **src/app/page.tsx**
   - 导入 ShopPage 组件
   - 添加商店页面路由

---

## 🎯 使用示例

### 场景 1：学习后的放松

1. 完成 3 个学习任务（INT属性）
   - 获得 300 智慧币 + 90 通用币

2. 前往商店 → 放纵奖励
   - 购买"游戏时间券"（80智慧币）
   - 剩余 220 智慧币 + 90 通用币

3. 享受 2 小时无罪恶感的游戏时间 🎮

### 场景 2：健身后的美食

1. 完成 2 个健身任务（VIT属性）
   - 获得 150 活力币 + 45 通用币

2. 前往商店 → 放纵奖励
   - 购买"放纵美食"（50活力币）
   - 剩余 100 活力币 + 45 通用币

3. 享受一顿大餐，完全不用担心卡路里 🍔

### 场景 3：提升属性

1. 积累 200 智慧币

2. 前往商店 → 能力提升
   - 购买"INT 属性点"（200智慧币）
   - 永久增加 5 点智力属性

3. 属性提升，解锁更多成就 📈

---

## 🚀 未来扩展

### 计划功能

1. **消耗型物品系统**
   - 经验卡、加成卡实际生效
   - 背包系统展示已购买物品
   - 使用物品的效果追踪

2. **称号系统**
   - 展示已购买的称号
   - 切换当前使用的称号
   - 称号显示在个人资料

3. **主题系统**
   - 应用已购买的主题皮肤
   - 自定义粒子颜色
   - 主题预览功能

4. **更多物品**
   - 季节性限定物品
   - 节日特惠物品
   - 联动成就解锁物品

5. **交易记录**
   - 查看购买历史
   - 统计消费数据
   - 金币流水记录

---

## 📝 总结

奖励商店系统成功实现了：

✅ **分类金币机制**：不同任务获得不同金币，引导专注发展
✅ **平衡设计**：放纵需要对应领域的努力，避免无意义消费
✅ **丰富物品**：40+ 物品，5大类别，满足不同需求
✅ **稀有度系统**：从普通到传说，形成收集目标
✅ **购买限制**：等级、成就、次数限制，增加策略性
✅ **完整 UI**：金币余额、类别筛选、物品卡片、购买提示

**体验全新的奖励商店，用努力换取真正有意义的奖励！** 🎁
